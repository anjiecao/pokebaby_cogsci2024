
```{r}
participant_n <- readRDS(here("cached_data/writing_cache/participant_n.Rds"))
lmer_background_baseline <- readRDS(here("cached_data/writing_cache/lmer_background_baseline.Rds")) %>% mutate(across(is.numeric, round, 2))
lmer_animacy_baseline <- readRDS(here("cached_data/writing_cache/lmer_animacy_baseline.Rds")) %>% mutate(across(is.numeric, round, 2))
lmer_pose_baseline <- readRDS(here("cached_data/writing_cache/lmer_pose_baseline.Rds")) %>% mutate(across(is.numeric, round, 2))
lmer_number_baseline <- readRDS(here("cached_data/writing_cache/lmer_number_baseline.Rds")) %>% mutate(across(is.numeric, round, 2))
lmer_identity_baseline <- readRDS(here("cached_data/writing_cache/lmer_identity_baseline.Rds")) %>% mutate(across(is.numeric, round, 2))
behavior_qua_order <- readRDS(here("cached_data/writing_cache/clean_behavioral_qual_order.Rds")) %>% mutate(across(is.numeric, round, 2))
```


```{r design_fig, fig.env = "figure", fig.pos = "H", fig.align='center', fig.width=3.5, fig.height=3.5, set.cap.width=T, num.cols.cap=1, fig.cap = "Experimental design of behavioral task: Adults watched sequences of stimuli consisting a familiarization to a stimulus (left), following by one of five trial types, which violates one property of the familiar stimulus: In the violation trials, participants saw either (1) the same exact stimulus (Background), (2) the same stimulus in a different orientation (Pose), (3) the same stimulus, but duplicated (or single if it was already duplicated; Number), (4) a different stimulus but in the same animacy class (Identity), or (5) a different stimulus of the opposite animacy (Animacy)."}
img <- png::readPNG("figs/design.png")
grid::grid.raster(img)
```

## Methods

### Stimuli

All stimuli were created using images selected from Unity assets [“Quirky Series - Animals”](https://assetstore.unity.com/packages/3d/characters/animals/quirky-series-animals-mega-pack-vol-2-183280) and [“3D Prop Vegetables and Fruits”](https://assetstore.unity.com/packages/3d/props/food/3d-prop-vegetables-and-fruits-237790). We added the same minor shaking animation to each image to increase interest. For each image from the animal set, we created a mirrored version to create an image with a different pose. Since most stimuli from the vegetable set were symmetrical, the images were slightly tilted before mirroring. 


### Procedure 

The experiment was a self-paced web-based experiment. Participants saw 24 blocks that consisted of either two, four, or six trials. On each trial, a schematic screen would rise up to reveal a stimulus behind it. Participants pressed the spacebar to go on to the next trial after a minimum viewing time of 500 ms, triggering the schematic screen to drop and raise again to reveal the next stimulus. 

Each participant saw eight types of repeating stimuli. The eight types of stimuli included all combinations of the three features that each included two levels: animacy (e.g. animate or inanimate), number (singleton or pair), and pose (facing left or right). 

Eight blocks consisted of one stimulus being repeatedly presented throughout the block (i.e. background trials). The remaining sixteen blocks included two stimuli, including one that was repeatedly present and one that deviated from the trial. The deviant trial was always different from the repeating stimulus in one of the four dimensions: animacy violation, identity violation, number violation, and pose violation. The deviant trial always showed up in the last trial of the block. In the first three violation types, the feature would be switched to the previously unseen level (e.g. an inanimate deviant after an animate repeating stimulus, keeping the number and the pose the same). For identity violation, the participants would see a different, but within-category, exemplar from the repeating stimuli type. Among the sixteen blocks, the four violation types each appeared four times. After each block, participants performed a simple memory task as a filler task. 

To control the distribution of background blocks and deviant blocks, we grouped the 24 blocks into four groups. Each group consisted of two background blocks, and one deviant block from each violation type. The order of blocks within each group was randomized.



### Participants 

We recruited 550 adult participants on Prolific. Participants were excluded if either (1) the standard deviation of log-transformed of their reaction times on all trials is less than 0.15 (indicating key-smashing); (2) spent more than three absolute deviations above the median of the task completion time as reported by Prolific, or (3) provided the incorrect response to more than 20% of the memory task. After the participant-level exclusion, we also applied trial-level exclusion. A trial was excluded from final analysis if it is three absolute deviations away from the median in the log-transformed space across all participants. The final sample included `r participant_n` participants.

## Results

The sample size and analysis plan are all pre-registered and can be found [here](https://aspredicted.org/blind.php?x=WGF_J7K). All analyses scripts are publicly available and can be found here [LINK].

We were primarily interested in (1) whether our experimental paradigm captured habituation and dishabituation and (2) whether the magnitude of dishabituation was influenced by the type of violation.  We tested these two hypotheses in a linear mixed-effect model with maximal random effect structure that predicts log-transformed looking time with the following specification on the fixed effect:  `log(total_rt) ~ trial_number +  is_first_trial +  (trial_number + is_first_trial) * stimulus_number + (trial_number + is_first_trial) * stimulus_pose +(trial_number + is_first_trial) * stimulus_animacy + (trial_number + is_first_trial) * violation_type + log(block_number)`. The violation_type  has five levels, including the background trial and four types of violation. ^[In our preregistered model, we specified an interaction between trial_number and is_first_trial that is automatically removed in the final model.]. 

Through different parameterization of the model (i.e. setting different baseline levels for violation type), we found evidence for habituation and graded dishabituation. When background was treated as the baseline, there was a significant  effect of trial number ($\beta$ = `r filter(lmer_background_baseline, term == "trial_number")$estimate`, *SE* = `r filter(lmer_background_baseline, term == "trial_number")$std.error`, *p* < .001). Moreover, looking time to animacy violations was significantly longer than to number violations ($\beta$ = `r filter(lmer_number_baseline, term == "violation_type_with_backgroundanimacy")$estimate`, *SE* = `r filter(lmer_number_baseline, term == "violation_type_with_backgroundanimacy")$std.error`, *p* < .001) and pose violations ($\beta$ = `r filter(lmer_pose_baseline, term == "violation_type_with_backgroundanimacy")$estimate`, *SE* = `r filter(lmer_pose_baseline, term == "violation_type_with_backgroundanimacy")$std.error`, *p* < .001), so are identity violations (cf. number: $\beta$ = `r filter(lmer_number_baseline, term == "violation_type_with_backgroundidentity")$estimate`, *SE* = `r filter(lmer_number_baseline, term == "violation_type_with_backgroundidentity")$std.error`, *p* < .001; cf. pose: $\beta$ = `r filter(lmer_pose_baseline, term == "violation_type_with_backgroundidentity")$estimate`, *SE* = `r filter(lmer_pose_baseline, term == "violation_type_with_backgroundidentity")$std.error`, *p* < .001).  But animacy violation was not different from the identity violation, nor was the number violation different from the pose violation (all p > 0.1) 

We also pre-registered a qualitative prediction on the ordering of the dishabituation magnitude (i.e. category > number > identity > pose). However, we did not find evidence consistent with this prediction. The qualitative ordering in our data was animacy (*M* = `r behavior_qua_order$animacy`), identity (*M* = `r behavior_qua_order$identity`), pose (*M* = `r behavior_qua_order$pose`) and number (*M* = `r behavior_qua_order$number`). 



